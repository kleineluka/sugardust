---
interface Props {
    leftLabel: string;
    rightLabel: string;
    defaultSelected?: 'left' | 'right';
}

const { leftLabel, rightLabel, defaultSelected = 'left' } = Astro.props;
---

<!-- Dual-Sided Toggle -->
<div class="toggle-container" data-selected={defaultSelected}>
    <button class="toggle-option left" data-value="left">
        {leftLabel}
    </button>
    <button class="toggle-option right" data-value="right">
        {rightLabel}
    </button>
</div>

<!-- CSS -->
<style>
    .toggle-container {
        display: flex;
        border: 3px solid #86DFE7;
        border-radius: 8px;
        background: linear-gradient(to top, #3B9EB5, #56BBCC);
        box-shadow: inset 0 0 0 2px #3C8EA6;
        transition: all 0.3s ease;
        z-index: 200; /* above status bar to allow interactions */
    }

    .toggle-option {
        flex: 1;
        padding: clamp(16px, 2.1vw, 24px) 24px;
        font-size: 14px;
        font-weight: 700;
        color: #D5F3F7;
        text-transform: uppercase;
        letter-spacing: 1px;
        background: transparent;
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        position: relative;
        text-align: center;
    }

    .toggle-option.left {
        border-right: 1px solid #3C8EA6;
    }

    .toggle-option.right {
        border-left: 1px solid #3C8EA6;
    }

    .toggle-option:hover {
        background: rgba(255, 255, 255, 0.1);
    }

    .toggle-container[data-selected="left"] .toggle-option.left,
    .toggle-container[data-selected="right"] .toggle-option.right {
        background: linear-gradient(to top, #45B0C8, #65D0E0);
        color: #9CF5FF;
        text-shadow: -1px -1px 0 #1A5C6E, 1px -1px 0 #1A5C6E, -1px 1px 0 #1A5C6E, 1px 1px 0 #1A5C6E;
        box-shadow: inset 0 0 20px rgba(168, 245, 255, 0.2);
    }

    .toggle-option:active {
        transform: scale(0.98);
    }
</style>

<script>
    function initToggle() {
        const toggleContainer = document.querySelector('.toggle-container');
        const toggleOptions = document.querySelectorAll('.toggle-option');
        toggleOptions.forEach(option => {
            option.addEventListener('click', () => {
                const value = option.getAttribute('data-value');
                if (toggleContainer) {
                    toggleContainer.setAttribute('data-selected', value || 'left');
                }
                console.log('Toggle selected:', value);
            });
        });
    }
    
    document.addEventListener('DOMContentLoaded', initToggle);
    document.addEventListener('astro:page-load', initToggle);
</script>
