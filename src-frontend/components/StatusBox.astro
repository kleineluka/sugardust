---
interface Props {
    label: string;
    value: string;
    textColor?: string;
    textOutlineColor?: string;
    action?: string;
}

const { label, value, textColor = "#9CF5FF", textOutlineColor = "#1A5C6E", action } = Astro.props;
---

<!-- Box Reused Per-Page in Status Bar -->
<div class={`status-box ${action ? 'clickable' : ''}`} data-action={action}>
    <div class="status-label">{label}</div>
    <div class="status-value" style={`color: ${textColor}; text-shadow: -1px -1px 0 ${textOutlineColor}, 1px -1px 0 ${textOutlineColor}, -1px 1px 0 ${textOutlineColor}, 1px 1px 0 ${textOutlineColor};`}>
        {value}
    </div>
</div>

<!-- CSS -->
<style>
    .status-box {
        border: 3px solid #86DFE7;
        border-radius: 8px;
        padding: 2px;
        background: linear-gradient(to top, #3B9EB5, #56BBCC);
        box-shadow: inset 0 0 0 2px #3C8EA6;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 4px;
        min-width: clamp(80px, 10vw, 140px);
        padding: clamp(8px, 1.5vw, 12px) clamp(12px, 2vw, 16px);
        transition: all 0.3s ease;
        cursor: default;
        z-index: 200; /* above status bar to allow interactions */
    }

    .status-box.clickable {
        cursor: pointer;
    }

    .status-box:hover {
        transform: translateY(-2px);
        border-color: #A8F5FF;
        box-shadow: inset 0 0 0 2px #3C8EA6, 0 4px 12px rgba(134, 223, 231, 0.5), 0 0 20px rgba(134, 223, 231, 0.3);
        background: linear-gradient(to top, #45B0C8, #65D0E0);
    }

    .status-box.clickable:active {
        transform: translateY(0px);
        box-shadow: inset 0 0 0 2px #3C8EA6, 0 2px 6px rgba(134, 223, 231, 0.4);
    }

    .status-label {
        font-size: clamp(10px, 1.2vw, 12px);
        font-weight: 600;
        color: #D5F3F7;
        text-transform: uppercase;
        letter-spacing: 1px;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    }

    .status-value {
        font-size: clamp(12px, 1.5vw, 16px);
        font-weight: 700;
        letter-spacing: 0.5px;
        transition: transform 0.3s ease;
    }

    .status-box:hover .status-value {
        transform: scale(1.05);
    }
</style>

<script>
    import { open } from '@tauri-apps/plugin-shell';

    document.addEventListener('DOMContentLoaded', () => {
        const statusBoxes = document.querySelectorAll('.status-box.clickable');
        
        statusBoxes.forEach(box => {
            box.addEventListener('click', async () => {
                const action = box.getAttribute('data-action');
                if (action) {
                    try {
                        await open(action);
                    } catch (error) {
                        console.error('Failed to open URL:', error);
                    }
                }
            });
        });
    });
</script>
