---
import type { ModData } from '../types/mod';

interface Props {
  mod: ModData;
  borderRadius?: string;
}

const { mod, borderRadius = '0.75rem' } = Astro.props;
---

<!-- Main Card HTML -->
<div class="relative group cursor-pointer transition-transform hover:scale-105 active:scale-95 p-1">
  <!-- Main Card Body -->
  <div 
    class="card-body relative w-full aspect-[4/3] shadow-lg overflow-hidden transition-transform duration-300"
    style={{ borderRadius }}
  >
    <!-- Icon / Image Placeholder -->
    <div class="w-full h-full flex items-center justify-center p-4">
      {mod.icon ? (
        <img src={mod.icon} alt={mod.name} class="w-full h-full object-contain opacity-80 group-hover:opacity-100 transition-opacity" />
      ) : (
        <div class="text-[var(--hp-teal-light)] opacity-50">
           <!-- Placeholder Icon -->
           <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16" fill="none" viewBox="0 0 24 24" stroke="currentColor">
             <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10l-2 1m0 0l-2-1m2 1v2.5M20 7l-2 1m2-1l-2-1m2 1v2.5M14 4l-2-1-2 1M4 7l2-1M4 7l2 1M4 7v2.5M12 21l-2-1m2 1l2-1m-2 1v-2.5M6 18l-2-1v-2.5M18 18l2-1v-2.5" />
           </svg>
        </div>
      )}
    </div>
  <!-- Toggle Switch -->
    <div class="absolute top-2 left-2 z-20" title={mod.enabled ? "Disable Mod" : "Enable Mod"}>
      <div class={`w-12 h-6 rounded-full border-2 border-[#162F3C] p-0.5 cursor-pointer transition-colors duration-200 ease-in-out ${mod.enabled ? 'bg-[#63B8B8]' : 'bg-[#1C3C4B]'}`}>
          <div class={`bg-white w-4 h-4 rounded-full shadow-md transform duration-200 ease-in-out ${mod.enabled ? 'translate-x-6' : 'translate-x-0'}`}></div>
      </div>
    </div>
    <!-- Version Badge -->
    <div class="absolute top-2 right-2 z-20">
      <span class="inline-block bg-[var(--hp-pink)] text-white text-xs font-black px-2 py-0.5 rounded shadow-sm border border-[var(--hp-pink-light)] -rotate-2">
        v{mod.version}
      </span>
    </div>
    <!-- Hover Info Overlay -->
    <div class="absolute inset-0 bg-[var(--hp-teal-dark)]/90 backdrop-blur-sm flex flex-col items-center justify-center p-6 opacity-0 group-hover:opacity-100 transition-opacity duration-300 text-center z-10">
      <div class="transform translate-y-4 group-hover:translate-y-0 transition-transform duration-300">
        <span class="block text-[var(--hp-gold)] text-xs font-bold uppercase tracking-wider mb-1">
          By {mod.author}
        </span>
        {mod.description && (
          <p class="text-white text-xs leading-relaxed italic line-clamp-3">
            "{mod.description}"
          </p>
        )}
        <!-- Delete Button -->
        <button class="mt-3 p-2 bg-[var(--hp-red)] hover:bg-red-600 text-white rounded-lg shadow-md transition-colors border-2 border-white/20" title="Delete Mod">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
            </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Overlapping Label -->
  <div 
    class="title-box absolute -bottom-5 inset-x-0 mx-auto w-[85%] h-12 flex items-center justify-center shadow-md z-10 transition-colors"
    style={{ borderRadius: `calc(${borderRadius} / 2)` }}
  >
    <span class="text-[#fff] font-bold uppercase tracking-[1.2px] truncate px-3 text-lg leading-[1.1]">
      {mod.name}
    </span>
  </div>
</div>

<!-- CSS -->
<style>
  .card-body {
    background: radial-gradient(circle, #1B3C4D 0%, #1C3C4B 100%);
    border: 4px solid #162F3C;
    box-shadow: 0 0 0 4px #63B8B8;
  }

  .title-box {
    background: radial-gradient(circle, #46AABF 0%, #4EB2C5 100%);
    border: 2px solid #378BA2;
    box-shadow: 0 0 0 4px #86DFE7;
  }
</style>
